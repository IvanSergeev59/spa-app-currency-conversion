(this["webpackJsonpspa-app-currency-conversion"]=this["webpackJsonpspa-app-currency-conversion"]||[]).push([[0],{35:function(e,r,n){},42:function(e,r,n){},43:function(e,r,n){},45:function(e,r,n){"use strict";n.r(r);var t=n(0),c=n.n(t),u=n(17),a=n.n(u),s=n(8),o=n(9),i=n(13),l=n(12),d=n(14),j=(n(35),n(1)),p=function(){return Object(j.jsxs)("header",{className:"header",children:[Object(j.jsx)("h3",{className:"header__h3",children:Object(j.jsx)(d.b,{className:"header__a",to:"/",children:"\u041a\u043e\u043d\u0432\u0435\u0440\u0442\u0435\u0440 \u0432\u0430\u043b\u044e\u0442"})}),Object(j.jsxs)("div",{className:"header__container",children:[Object(j.jsx)(d.b,{className:"header__a",to:"/",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(j.jsx)(d.b,{className:"header__a",to:"/current-exchange-rate/",children:"\u041a\u0443\u0440\u0441 \u0432\u0430\u043b\u044e\u0442"})]})]})},b=n(46),h=n(6),y=(n(42),function(e){var r=e.sumTotalUsd,n=e.currentCurrencies,t=n.errorUserWrongInput,c=n.exchangeCurrency_1,u=n.userCurrency,a=n.exchangeCurrency_2,s=n.userSumInputMoney_2,o=n.userSumInputMoney_1;return Object(j.jsxs)("div",{className:"currency-list",children:[Object(j.jsxs)("div",{className:"form",children:[Object(j.jsxs)(b.a.Group,{className:"currency-list-margin",children:[Object(j.jsx)(b.a.Label,{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"}),Object(j.jsx)(b.a.Control,{onChange:function(e){var n=e.target.value;return r(n)},id:"only_num",type:"number",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"})]}),Object(j.jsx)("p",{className:"currency-list__error",children:t}),Object(j.jsxs)("p",{className:"result-block",children:[u," in ",c,":"]}),Object(j.jsx)("p",{className:"result-field",children:o})]}),Object(j.jsxs)("p",{className:"result-block",children:[u," in ",a,":"]}),Object(j.jsx)("p",{className:"result-field",children:s})]})}),O=function(e){Object(i.a)(n,e);var r=Object(l.a)(n);function n(){return Object(s.a)(this,n),r.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,r=e.sumTotalUsd,n=e.currentCurrencies;return Object(j.jsx)(y,{sumTotalUsd:r,currentCurrencies:n})}}]),n}(t.Component),x=Object(h.b)((function(e){return{currentCurrencies:e.currentCurrencies}}),(function(e){return{sumTotalUsd:function(r){return e(function(e){return{type:"SUM_TOTAL",payload:e}}(r))}}}))(O),f=function(){return Object(j.jsx)(t.Fragment,{children:Object(j.jsx)(x,{})})},C=(n(43),Object(h.b)((function(e){return{currentCurrencies:e.currentCurrencies}}))((function(e){var r=e.currentCurrencies,n=r.exchangeCurrency_1_value,c=r.exchangeCurrency_2_value,u=r.exchangeCurrency_1,a=r.exchangeCurrency_2;return Object(j.jsxs)(t.Fragment,{children:[Object(j.jsx)("h3",{className:"pages pages__h3",children:"\u0410\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u043a\u0443\u0440\u0441 \u0432\u0430\u043b\u044e\u0442:"}),Object(j.jsxs)("div",{className:"pages__currency-window",children:[Object(j.jsxs)("p",{className:"pages__currency-window_p",children:[u,":"]}),Object(j.jsx)("p",{className:"pages__currency-window_p",children:n})]}),Object(j.jsxs)("div",{className:"pages__currency-window",children:[Object(j.jsxs)("p",{className:"pages__currency-window_p",children:[a,":"]}),Object(j.jsx)("p",{className:"pages__currency-window_p",children:c})]})]})}))),_=function(e){var r=e.userChangeCurrency;return Object(j.jsxs)("div",{className:"currency-list currency-list-user",children:[Object(j.jsx)("p",{className:"currency-list-_p",children:"\u0412\u0430\u0448\u0430 \u0432\u0430\u043b\u044e\u0442\u0430:"}),Object(j.jsxs)(b.a.Select,{onChange:function(e){var n=e.target.value;return r(n)},"aria-label":"Default select example",children:[Object(j.jsx)("option",{value:"USD",children:"USD"}),Object(j.jsx)("option",{value:"EURO",children:"EURO"}),Object(j.jsx)("option",{value:"RUB",children:"RUB"})]})]})},m=function(e){Object(i.a)(n,e);var r=Object(l.a)(n);function n(){return Object(s.a)(this,n),r.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.userChangeCurrency;return Object(j.jsx)(_,{userChangeCurrency:e})}}]),n}(t.Component),v=Object(h.b)((function(e){return{userChangeCurrency:e.userChangeCurrency}}),(function(e,r){return{userChangeCurrency:function(r){return e(function(e){return{type:"CHANGE_CURRENCY",payload:e}}(r))}}}))(m),g=n(3),U=n(2),T=c.a.createContext(),E=T.Provider,R=T.Consumer,N=function(){return function(e){return function(r){return Object(j.jsx)(R,{children:function(n){return Object(j.jsx)(e,Object(U.a)(Object(U.a)({},r),{},{currencyService:n}))}})}}},S=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return function(e){return r.reduceRight((function(e,r){return r(e)}),e)}},w=S,F=function(e){Object(i.a)(n,e);var r=Object(l.a)(n);function n(){return Object(s.a)(this,n),r.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchCurrencies()}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(p,{}),Object(j.jsx)(v,{}),Object(j.jsxs)(g.c,{children:[Object(j.jsx)(g.a,{path:"/spa-app-currency-conversion/",element:Object(j.jsx)(f,{})}),Object(j.jsx)(g.a,{path:"/*",element:Object(j.jsx)(f,{})}),Object(j.jsx)(g.a,{path:"/current-exchange-rate/",element:Object(j.jsx)(C,{})})]})]})}}]),n}(t.Component),I=w(N(),Object(h.b)((function(e){return e}),(function(e,r){var n=r.currencyService;return{fetchCurrencies:function(){return e(function(e){return function(){return function(r){r({type:"CURRENCIES_REQUESTED"}),e.getCurrencies().then((function(e){return r({type:"UPDATE_CURRENCY",payload:e})})).catch()}}}(n)())}}})))(F),D=function(e,r){if(void 0===e)return{usdToRub:"70",usdToEuro:"0",euroToRub:"70",euroToUsd:"0",rubToEuro:"70",rubToUsd:"0",userSumInputMoney_1:"0",userSumInputMoney_2:"0",userCurrency:"USD",exchangeCurrency_1:"EURO",exchangeCurrency_2:"RUB",total:"0",errorUserWrongInput:" "};switch(r.type){case"SUM_TOTAL":return function(e,r){var n=e.currentCurrencies,t=n.userCurrency,c=n.usdToRub,u=n.usdToEuro,a=n.euroToRub,s=n.euroToUsd,o=n.rubToEuro,i=n.rubToUsd,l=function(e,r,n,t){return{userSumInputMoney_1:e,userSumInputMoney_2:r,total:n,errorUserWrongInput:t}};if(/^(0|[1-9]\d*)$/.test(r.payload)&r.payload>=0)return Object(U.a)(Object(U.a)({},e.currentCurrencies),function(e){return"USD"===e?{onCalculateOfUserCurrency:l((r.payload*u).toFixed(4),(r.payload*c).toFixed(4),r.payload," ")}:"EURO"===e?(console.log(r.payload,s),{onCalculateOfUserCurrency:l((r.payload*s).toFixed(4),(r.payload*a).toFixed(4),r.payload," ")}):{onCalculateOfUserCurrency:l((r.payload*i).toFixed(4),(r.payload*o).toFixed(4),r.payload," ")}}(t).onCalculateOfUserCurrency);return Object(U.a)(Object(U.a)({},e.currentCurrencies),{},{userSumInputMoney_1:0,userSumInputMoney_2:0,total:0,errorUserWrongInput:"\u041d\u0435\u0432\u0435\u0440\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"})}(e,r);case"CHANGE_CURRENCY":return function(e,r){var n=e.currentCurrencies,t=n.rubToUsd,c=n.euroToRub,u=n.total,a=n.usdToEuro,s=n.euroToUsd,o=n.usdToRub,i=n.rubToEuro,l=function(e,r,n,t,c,u){return{exchangeCurrency_1:e,exchangeCurrency_2:r,exchangeCurrency_1_value:n,exchangeCurrency_2_value:t,userSumInputMoney_1:c,userSumInputMoney_2:u}};return Object(U.a)(Object(U.a)({},e.currentCurrencies),{},{userCurrency:r.payload},("USD"===r.payload?{currentParams:l("EURO","RUB",a,o,(u*a).toFixed(4),(u*o).toFixed(4))}:"EURO"===r.payload?{currentParams:l("USD","RUB",s,c,(u*s).toFixed(4),(u*c).toFixed(4))}:{currentParams:l("USD","EUR",t,i,(u*t).toFixed(4),(u*i).toFixed(4))}).currentParams)}(e,r);case"UPDATE_CURRENCY":return Object(U.a)(Object(U.a)(Object(U.a)({},e.currentCurrencies),r.payload),{},{exchangeCurrency_1_value:r.payload.usdToEuro,exchangeCurrency_2_value:r.payload.usdToRub});case"CURRENCIES_REQUESTED":return Object(U.a)(Object(U.a)({},e.currentCurrencies),{},{exchangeCurrency_1_value:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430",exchangeCurrency_2_value:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"});default:return e.currentCurrencies}},k=function(e,r){return{currentCurrencies:D(e,r)}},M=n(23),A=n(29),B=Object(M.b)(k,Object(M.a)(A.a,(function(){return function(e){return function(r){return e("string"===typeof r?{type:r}:r)}}}),(function(e){e.getState;return function(e){return function(r){return e(r)}}})));B.dispatch((function(e){setTimeout((function(){return e({type:"DELATED_ACTION"})}),2e3)}));var P=B,L=n(16),V=n.n(L),W=n(24),Y=function(){function e(){var r=this;Object(s.a)(this,e),this.apiBase="https://www.cbr-xml-daily.ru/daily_json.js",this.getCurrencies=Object(W.a)(V.a.mark((function e(){var n,t,c,u;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getCurrency();case 2:return n=e.sent,t=n.Valute.USD.Value.toFixed(4),c=n.Valute.EUR.Value.toFixed(4),u={usdToRub:t,euroToRub:c,usdToEuro:(t/c).toFixed(4),euroToUsd:(c/t).toFixed(4),rubToEuro:(1/c).toFixed(4),rubToUsd:(1/t).toFixed(4)},e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})))}return Object(o.a)(e,[{key:"getCurrency",value:function(){var e=Object(W.a)(V.a.mark((function e(){var r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.apiBase);case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(this.apiBase)+" , received ".concat(r.status));case 5:return e.abrupt("return",r.json());case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),G=new Y;a.a.render(Object(j.jsx)(h.a,{store:P,children:Object(j.jsx)(E,{value:G,children:Object(j.jsx)(d.a,{children:Object(j.jsx)(I,{})})})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.55a7aa13.chunk.js.map